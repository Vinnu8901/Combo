<!-- Left panel for POM Studio -->
<section id="pomLeftCard" class="card">
  <div class="head">Paste HTML</div>
  <div class="body">
    <textarea id="pasteBox" class="ed" placeholder="Paste full page HTML here..."></textarea>
    <div class="row">
      <button id="btnRender" class="btn primary" style="width:auto">Render Preview</button>
      <div class="pill mono">shadow DOM supported at runtime</div>
    </div>
    <div class="head" style="margin:6px -12px 0;border-radius:10px">Preview</div>
    <div class="drop" id="dropZone">Drop .html here</div>
    <iframe id="preview" sandbox="allow-same-origin allow-forms allow-scripts"></iframe>
  </div>
</section>

<!-- Left panel for API Studio -->
<section id="apiLeftCard" class="card hidden">
  <div class="head">Paste cURL</div>
  <div class="body">
    <textarea id="curlBox" class="ed mono" placeholder="Paste full cURL command here..."></textarea>
    <div class="row">
      <button id="btnGenAPI" class="btn primary" style="width:auto">Generate API Code</button>
    </div>
  </div>
</section>


function setMode(m){
  modePOM.classList.remove('active'); 
  modeAPI.classList.remove('active');

  if(m==='pom'){ 
    modePOM.classList.add('active'); 
    pomPanel.classList.remove('hidden'); 
    apiPanel.classList.add('hidden'); 
    $('#pomLeftCard').classList.remove('hidden');
    $('#apiLeftCard').classList.add('hidden');
  }
  else { 
    modeAPI.classList.add('active'); 
    pomPanel.classList.add('hidden'); 
    apiPanel.classList.remove('hidden'); 
    $('#pomLeftCard').classList.add('hidden');
    $('#apiLeftCard').classList.remove('hidden');
  }
}



$('#btnGenAPI').addEventListener('click', ()=>{
  const curl = $('#curlBox').value.trim();
  if(!curl){ showToast('No cURL entered'); return; }
  parseCurl(curl);
  generateApiCode();  // this now outputs RestAssured + Karate
  showToast('API code generated');
});
