Changes to Dhyan.html

1. Left Panel for API Studio

Add this section (replace the old left side used for POM):

<!-- Left panel for API Studio -->
<section id="apiLeftCard" class="card hidden">
  <div class="head">Paste cURL</div>
  <div class="body">
    <textarea id="curlBox" class="ed mono" placeholder="Paste full cURL command here (from Postman/Insomnia)..."></textarea>
    <div class="row" style="align-items:center; gap:12px">
      <label class="small">Framework</label>
      <select id="apiFramework">
        <option value="restassured">RestAssured (Java)</option>
        <option value="karate">Karate DSL</option>
      </select>
      <button id="btnGenAPI" class="btn primary" style="width:auto">Generate API Code</button>
    </div>
  </div>
</section>


---

2. Update setMode()

So that when API Studio is selected, it hides POM panel and shows API panel only:

function setMode(m){
  modePOM.classList.remove('active'); 
  modeAPI.classList.remove('active');

  if(m==='pom'){ 
    modePOM.classList.add('active'); 
    pomPanel.classList.remove('hidden'); 
    apiPanel.classList.add('hidden'); 
    $('#pomLeftCard').classList.remove('hidden');
    $('#apiLeftCard').classList.add('hidden');
  }
  else { 
    modeAPI.classList.add('active'); 
    pomPanel.classList.add('hidden'); 
    apiPanel.classList.remove('hidden'); 
    $('#pomLeftCard').classList.add('hidden');
    $('#apiLeftCard').classList.remove('hidden');
  }
}


---

3. Hook the new Generate API Code button

Add this block after your existing API hooks in the <script>:

// NEW: Generate API Code directly from pasted cURL
$('#btnGenAPI').addEventListener('click', ()=>{
  const curl = $('#curlBox').value.trim();
  if(!curl){ showToast('No cURL entered'); return; }
  parseCurl(curl);              // extract Method, Endpoint, Headers, Body
  generateApiCode();            // build code snippet
  showToast('API code generated');
});


---

4. Update generateApiCode() to respect framework selection

Replace your current function with this:

function generateApiCode(){
  const method = $('#apiMethod').value;
  const url = $('#apiUrl').value;
  let headers = $('#apiHeaders').value;
  const body = $('#apiBody').value;
  const framework = $('#apiFramework').value; // restassured | karate

  try { headers = JSON.stringify(JSON.parse(headers), null, 2); } catch(e) {}

  let code = "";

  if(framework === "restassured"){
    code = `// RestAssured Example
given()
  .headers(${headers})
  .body(${body})
.when()
  .${method.toLowerCase()}("${url}")
.then()
  .statusCode(200);`;
  }
  else if(framework === "karate"){
    code = `# Karate DSL Example
Feature: API Test
  Scenario: ${method} request
    Given url '${url}'
    And headers ${headers}
    And request ${body}
    When method ${method.toLowerCase()}
    Then status 200`;
  }

  $('#apiCode').value = code;
}

